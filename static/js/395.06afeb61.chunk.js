"use strict";(self.webpackChunkfarmersescos_web_portal=self.webpackChunkfarmersescos_web_portal||[]).push([[395],{9395:(e,s,r)=>{r.r(s),r.d(s,{default:()=>I});var t=r(9263),o=r(1834),a=r(5269),n=r(4095),i=r(9344),l=r(3077),c=r(1773),d=r(2996),m=r(9978),u=r(3216),x=r(7677),h=r(8843),A=r(5522),f=r(3513),g=r(3892),p=r(4399),j=r(5847),v=r(8863),b=r(5043),y=r(7836),w=r(8742),P=r(7191),C=r(8068);var B=r(439),R=r(9278),D=r(6063),k=r(600),S=r(8331),T=r(1036),L=r(4021);function z(){const[e,{isLoading:s}]=(0,w.Jb)();return[async function(s,r){const t=function(e){const s=structuredClone(e),{farmers:r,agroProcessors:t}=s;return null!==r&&void 0!==r&&r.length&&(s.farmerIds=r.map((e=>e.id)),delete s.farmers),null!==t&&void 0!==t&&t.length&&(s.agroProcessorIds=t.map((e=>e.id)),delete s.agroProcessors),s}(r),{unwrap:o}=e({groupId:s,...t});try{const e=await o();return T.oR.success("Group update"),e}catch(a){T.oR.error(`Group update failed. Reason: ${(0,L.A)(a)}`)}},s]}var E=r(6672),O=r(4624),G=r(579);function I(){const{id:e}=(0,u.g)(),[s,r]=(0,b.useState)(!1),[T,L]=(0,E.A)(),[I,_]=z(),{data:F,error:V,isFetching:W}=(0,w.Ht)(e);if(W)return(0,G.jsx)(x.A,{});if(V)return(0,G.jsx)(P.A,{error:V});if(F){const u=function(e){return[...(null===e||void 0===e?void 0:e.farmers)||[],...(null===e||void 0===e?void 0:e.agroProcessors)||[]]}(F);return(0,G.jsxs)(t.A,{sx:{padding:2,marginBottom:3,maxWidth:800,marginLeft:"auto",marginRight:"auto",position:"relative"},children:[(0,G.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",borderRadius:"md"},variant:"soft",color:"success",children:(0,G.jsxs)(t.A,{sx:{width:400,position:"relative"},children:[(0,G.jsx)(a.A,{variant:"plain",children:(0,G.jsx)("img",{src:(0,y.A)(F.coverPhoto),alt:F.name})}),(0,G.jsxs)(n.A,{sx:{position:"absolute",left:10,bottom:-20},children:[(0,G.jsx)(i.A,{size:"sm",variant:"solid",src:(0,y.A)(F.profilePhoto)}),u.slice(0,4).map((e=>(0,G.jsx)(i.A,{src:(0,y.A)(e.profilePhoto),size:"sm",variant:"solid"})))]})]})}),(0,G.jsxs)(l.A,{variant:"soft",color:"warning",buttonFlex:1,sx:{marginTop:4},children:[(0,G.jsx)(c.A,{disabled:L,loading:L,loadingPosition:"start",startDecorator:(0,G.jsx)(f.A,{}),onClick:async()=>{await T(e)},children:"Delete"}),(0,G.jsx)(c.A,{startDecorator:(0,G.jsx)(A.A,{}),children:"Reset"})]}),(0,G.jsx)(d.Ay,{level:"h3",sx:{marginTop:3,marginBottom:2},children:(0,B.A)(F.name)}),(0,G.jsx)(v.A,{initialValues:{...F},validationSchema:C.Ay,onSubmit:async s=>{const r=(0,p.A)(F,s);(0,j.A)(r)||await I(e,r)},onDirty:e=>r(e),children:(0,G.jsxs)(g.lV,{children:[(0,G.jsx)(k.A,{name:"name",label:"Name",sx:{marginBottom:2}}),(0,G.jsx)(k.A,{name:"phoneNumber",label:"Phone number",sx:{marginBottom:2}}),(0,G.jsx)(k.A,{name:"email",label:"Email",type:"email",sx:{marginBottom:2}}),(0,G.jsx)(k.A,{name:"address",label:"Address",sx:{marginBottom:2}}),(0,G.jsx)(k.A,{name:"website",label:"Website",sx:{marginBottom:2}}),(0,G.jsx)(D.A,{label:"What kind of group is this?",name:"type",options:["SACCO","COOPERATIVE","OTHER"],sx:{marginBottom:2}}),(0,G.jsx)(S.A,{name:"description",label:"Tell us more about this group"}),(0,G.jsx)(d.Ay,{level:"title",sx:{marginTop:2},children:"Members"}),(0,G.jsx)(R.A,{name:"farmers",placeholder:"Search to add farmers",sx:{marginBottom:2}}),(0,G.jsx)(O.A,{name:"agroProcessors",placeholder:"Search to add agro processors"}),(0,G.jsxs)(m.A,{direction:"row",sx:{marginTop:3,width:"100%"},children:[(0,G.jsx)(c.A,{sx:{flexGrow:1},type:"reset",size:"md",variant:"soft",color:"success",disabled:!s||_,children:"Undo Changes"}),(0,G.jsx)(c.A,{size:"md",color:"success",variant:"solid",startDecorator:(0,G.jsx)(h.A,{}),sx:{flexGrow:2,marginLeft:2},type:"submit",disabled:!s||_,loading:_,loadingPosition:"start",children:"Save"})]})]})})]})}}},8863:(e,s,r)=>{r.d(s,{A:()=>i});var t=r(3892),o=r(5043),a=r(579);function n(e){let{onDirty:s,children:r}=e;const{dirty:n}=(0,t.j7)();return(0,o.useEffect)((()=>{s(n)}),[n,s]),(0,a.jsx)(a.Fragment,{children:r})}function i(e){let{children:s,onDirty:r,...o}=e;return(0,a.jsx)(t.l1,{...o,children:(0,a.jsx)(n,{onDirty:r,children:s})})}},4399:(e,s,r)=>{r.d(s,{A:()=>i});const t=r(9159),o=r(67),a=r(6878),{isArray:n}=Array;function i(e,s){return function e(s,r){return t(s,(function(s,t,i){o(t,r[i])||(s[i]=a(t)&&a(r[i])&&!n(t)&&!n(r[i])?e(t,r[i]):t)}))}(s,e)}},5522:(e,s,r)=>{var t=r(4994);s.A=void 0;var o=t(r(39)),a=r(579);s.A=(0,o.default)((0,a.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9 0 .06.01.12.01.19l-1.84-1.84-1.41 1.41L5 16l4.24-4.24-1.41-1.41-1.82 1.82c0-.06-.01-.11-.01-.17 0-3.86 3.14-7 7-7s7 3.14 7 7-3.14 7-7 7c-1.9 0-3.62-.76-4.88-1.99L6.7 18.42C8.32 20.01 10.55 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m2 8v-1c0-1.1-.9-2-2-2s-2 .9-2 2v1c-.55 0-1 .45-1 1v3c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-3c0-.55-.45-1-1-1m-1 0h-2v-1c0-.55.45-1 1-1s1 .45 1 1z"}),"LockResetOutlined")}}]);
//# sourceMappingURL=395.06afeb61.chunk.js.map