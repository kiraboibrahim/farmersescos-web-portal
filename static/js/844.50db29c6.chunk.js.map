{"version":3,"file":"static/js/844.50db29c6.chunk.js","mappings":"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","sources":["components/common/fields/RemoteSelect.js","validation-schemas/product/ProductSchema.js","components/ProductDetail/ProductForm.js","hooks/useUpdateProduct.js","components/LearningMaterialList/LearningMaterialList.js","components/ProductDetail/ProductDetail.js","hooks/useDeleteProduct.js","components/common/fields/DirtyFormik.js","utils/difference.js"],"sourcesContent":["import {\n  FormControl,\n  FormLabel,\n  Box,\n  FormHelperText,\n  Typography,\n} from \"@mui/joy\";\nimport AsyncSelect from \"react-select/async\";\nimport { useField } from \"formik\";\nimport { useTheme } from \"@mui/joy/styles\";\n\nexport default function RemoteSelect({\n  name,\n  label,\n  defaultOptions = true,\n  getOptions,\n  getOptionLabel,\n  getOptionValue,\n  isMulti,\n  placeholder,\n  sx,\n  ...props\n}) {\n  const theme = useTheme();\n  const [\n    ,\n    { value: selectedOptions, touched, error },\n    { setValue, setTouched },\n  ] = useField({ name, ...props });\n\n  const { required } = props;\n  const hasError = touched && !!error;\n  return (\n    <FormControl sx={Array.isArray(sx) ? sx : [sx]} error={hasError}>\n      <FormLabel>\n        {label}\n        {!!required && (\n          <Typography color=\"danger\" level=\"body-sm\">\n            *\n          </Typography>\n        )}\n      </FormLabel>\n      <Box sx={{ display: \"flex\", flexWrap: \"wrap\" }}>\n        <AsyncSelect\n          isMulti={isMulti}\n          loadOptions={getOptions}\n          defaultOptions={defaultOptions}\n          value={selectedOptions}\n          getOptionLabel={getOptionLabel}\n          getOptionValue={getOptionValue}\n          isClearable={false}\n          onChange={(value) => {\n            setTouched(true);\n            setValue(value);\n          }}\n          placeholder={placeholder}\n          /* Hide the multi value container in order to use the select just like a search field */\n          styles={{\n            container: (baseCss) => ({\n              ...baseCss,\n              display: \"inline-block\",\n              flexGrow: 1,\n            }),\n            control: (baseCss) => ({\n              ...baseCss,\n              border: error\n                ? `1px solid ${theme.palette.danger.outlinedBorder}`\n                : baseCss?.border,\n            }),\n          }}\n        />\n      </Box>\n      {hasError && (\n        <FormHelperText sx={{ fontSize: \"sm\" }}>{error}</FormHelperText>\n      )}\n    </FormControl>\n  );\n}\n","import * as Yup from \"yup\";\n\nconst ProductSchema = Yup.object({\n  name: Yup.string().max(100).required(\"Product name is required\"),\n  description: Yup.string().max(500).required(\"Description is required\"),\n  categories: Yup.array().min(1, \"Specify atleast one category\"),\n});\n\nexport default ProductSchema;\n","import { useState } from \"react\";\nimport TextInput from \"../common/fields/TextInput\";\nimport { Form } from \"formik\";\nimport Textarea from \"../common/fields/Textarea\";\nimport { toast } from \"react-toastify\";\nimport RemoteSelect from \"../common/fields/RemoteSelect\";\nimport ProductSchema from \"../../validation-schemas/product/ProductSchema\";\nimport difference from \"../../utils/difference\";\nimport isEmpty from \"../../utils/isEmpty\";\nimport { useLazyGetProductsCategoriesQuery } from \"../../services/productCategories\";\nimport DirtyFormik from \"../common/fields/DirtyFormik\";\nimport useUpdateProduct from \"../../hooks/useUpdateProduct\";\nimport SaveOutlinedIcon from \"@mui/icons-material/SaveOutlined\";\nimport { Stack, Button } from \"@mui/joy\";\n\nexport default function ProductForm({ product }) {\n  const [isDirty, setIsDirty] = useState(false);\n  const [updateProduct, isUpdatingProduct] = useUpdateProduct();\n  const [fetchProductCategories] = useLazyGetProductsCategoriesQuery();\n  return (\n    <DirtyFormik\n      initialValues={{\n        ...product,\n      }}\n      validationSchema={ProductSchema}\n      onSubmit={async (values) => {\n        const updatedValues = difference(product, values);\n        if (!isEmpty(updatedValues)) {\n          await updateProduct(product.id, updatedValues);\n        }\n      }}\n      onDirty={(isDirty) => setIsDirty(isDirty)}\n    >\n      <Form>\n        <TextInput sx={{ marginTop: 3 }} name=\"name\" label=\"Product name\" />\n        <RemoteSelect\n          sx={{ marginTop: 2 }}\n          isMulti={true}\n          name=\"categories\"\n          label=\"Categories\"\n          getOptionLabel={(option) => option.name}\n          getOptionValue={(option) => option.id}\n          getOptions={(inputValue, callback) => {\n            fetchProductCategories()\n              .unwrap()\n              .then(({ data: productCategories }) => {\n                callback(\n                  productCategories.filter(({ name }) =>\n                    name.toLowerCase().includes(inputValue.toLowerCase())\n                  )\n                );\n              })\n              .catch((err) => toast.error(err?.message));\n          }}\n        />\n        <Textarea\n          sx={{ marginTop: 2 }}\n          name=\"description\"\n          label=\"Description\"\n        ></Textarea>\n\n        <Stack\n          direction=\"row\"\n          sx={{\n            marginTop: 2,\n            width: \"100%\",\n          }}\n        >\n          <Button\n            sx={{ flexGrow: 1 }}\n            type=\"reset\"\n            size=\"md\"\n            variant=\"soft\"\n            color=\"success\"\n            disabled={!isDirty || isUpdatingProduct}\n          >\n            Undo Changes\n          </Button>\n          <Button\n            size=\"md\"\n            color=\"success\"\n            variant=\"solid\"\n            startDecorator={<SaveOutlinedIcon />}\n            sx={{ flexGrow: 2, marginLeft: 2 }}\n            type=\"submit\"\n            disabled={!isDirty || isUpdatingProduct}\n            loading={isUpdatingProduct}\n            loadingPosition=\"start\"\n          >\n            Save\n          </Button>\n        </Stack>\n      </Form>\n    </DirtyFormik>\n  );\n}\n","import { toast } from \"react-toastify\";\nimport { useUpdateProductMutation } from \"../services/product\";\nimport parseError from \"../components/common/utils/parse-error\";\n\nexport default function useUpdateProduct() {\n  const [_updateProduct, { isLoading }] = useUpdateProductMutation();\n  async function updateProduct(productId, body) {\n    const bodyCopy = structuredClone(body);\n    const { categories } = bodyCopy;\n    // Format the categories in the structure expected by the API\n    if (!!categories?.length) {\n      bodyCopy[\"categoriesIds\"] = categories.map((category) => category.id);\n      delete bodyCopy[\"categories\"];\n    }\n    const { unwrap } = _updateProduct({ productId, ...bodyCopy });\n    try {\n      const data = await unwrap();\n      toast.success(\"Product updated\");\n      return data;\n    } catch (err) {\n      toast.error(`Product update failed. Reason: ${parseError(err)}`);\n    }\n  }\n\n  return [updateProduct, isLoading];\n}\n","import { useGetProductLearningMaterialQuery } from \"../../services/product\";\nimport YouTubePlayer from \"react-player/youtube\";\nimport Error from \"../common/utils/Error\";\nimport Loading from \"../common/utils/Loading\";\nimport { Sheet, Stack, Typography, Button, Card, CardContent } from \"@mui/joy\";\nimport SchoolOutlinedIcon from \"@mui/icons-material/SchoolOutlined\";\nimport { useLearningModalContext } from \"../ProductDetail/CreateLearningMaterialModal\";\nimport { useDeleteLearningMaterialMutation } from \"../../services/product\";\nimport { toast } from \"react-toastify\";\nimport parseError from \"../common/utils/parse-error\";\n\nfunction LearningMaterial({ item, sx = [], ...props }) {\n  const [_deleteLearningMaterial, { isLoading }] =\n    useDeleteLearningMaterialMutation();\n  const { id, videoUrl, title } = item;\n  async function deleteLearningMaterial() {\n    const { unwrap } = _deleteLearningMaterial(id);\n    try {\n      await unwrap();\n      toast.success(\"Learning material deleted\");\n    } catch (err) {\n      toast.error(parseError(err));\n    }\n  }\n  return (\n    <Card\n      size=\"sm\"\n      sx={[\n        { minWidth: 1, maxWidth: 1, borderRadius: \"lg\" },\n        { ...(Array.isArray(sx) ? sx : [sx]) },\n      ]}\n      {...props}\n    >\n      <CardContent orientation=\"horizontal\" sx={{ alignItems: \"center\" }}>\n        <Typography\n          level=\"body-sm\"\n          sx={{\n            overflow: \"hidden\",\n            textOverflow: \"ellipsis\",\n            whiteSpace: \"nowrap\",\n          }}\n        >\n          {title}\n        </Typography>\n        <Button\n          size=\"sm\"\n          sx={{ borderRadius: 50, marginLeft: \"auto\" }}\n          color=\"danger\"\n          disabled={isLoading}\n          loading={isLoading}\n          loadingPosition=\"start\"\n          onClick={async () => await deleteLearningMaterial()}\n        >\n          Delete\n        </Button>\n      </CardContent>\n      <CardContent>\n        <YouTubePlayer url={videoUrl} width=\"100%\" height={200} />\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction EmptyLearningMaterials() {\n  const [, openLearningModal] = useLearningModalContext();\n  return (\n    <Sheet\n      variant=\"soft\"\n      color=\"neutral\"\n      sx={{\n        minWidth: 1,\n        height: 200,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        borderRadius: \"lg\",\n      }}\n    >\n      <Stack direction=\"column\" sx={{ alignItems: \"center\" }}>\n        <SchoolOutlinedIcon fontSize=\"xl3\" />\n        <Typography level=\"body-sm\">No Learning Materials</Typography>\n        <Button\n          size=\"sm\"\n          variant=\"soft\"\n          color=\"success\"\n          sx={{ borderRadius: 50, marginTop: 1 }}\n          onClick={() => openLearningModal()}\n        >\n          Upload\n        </Button>\n      </Stack>\n    </Sheet>\n  );\n}\nexport default function LearningMaterialsList({ productId }) {\n  const {\n    data: learningMaterials,\n    isFetching,\n    error: fetchError,\n  } = useGetProductLearningMaterialQuery(productId);\n\n  if (isFetching) return <Loading size=\"sm\" />;\n  if (!!fetchError) return <Error error={fetchError} />;\n\n  if (!!learningMaterials.length) {\n    return (\n      <Stack\n        direction=\"row\"\n        spacing={2}\n        sx={{\n          overflowX: \"scroll\",\n          overflowY: \"hidden\",\n          overflow: \"scroll\",\n          \"&::-webkit-scrollbar\": {\n            display: \"none\",\n          },\n          \"&\": {\n            scrollbarWidth: \"none\",\n            msOverflowStyle: \"none\",\n          },\n        }}\n      >\n        {learningMaterials.map((learningMaterial, index) => (\n          <LearningMaterial\n            item={learningMaterial}\n            key={index}\n            sx={{ flex: \"1 1 auto\" }}\n          />\n        ))}\n      </Stack>\n    );\n  } else {\n    return <EmptyLearningMaterials />;\n  }\n}\n","import {\n  AspectRatio,\n  Avatar,\n  Box,\n  Button,\n  ButtonGroup,\n  Card,\n  CardContent,\n  IconButton,\n  Stack,\n  Typography,\n} from \"@mui/joy\";\nimport ChevronRightOutlinedIcon from \"@mui/icons-material/ChevronRightOutlined\";\nimport DeleteOutlinedIcon from \"@mui/icons-material/DeleteOutlined\";\nimport StarBorderOutlinedIcon from \"@mui/icons-material/StarBorderOutlined\";\nimport { Link as RouterLink, useParams } from \"react-router-dom\";\nimport { useGetProductQuery } from \"../../services/product\";\nimport Loading from \"../common/utils/Loading\";\nimport { useState } from \"react\";\nimport resolvePhotoSrc from \"../../utils/resolve-photo-src\";\nimport toTitleCase from \"../../utils/toTitleCase\";\nimport Error from \"../../components/common/utils/Error\";\nimport useDeleteProduct from \"../../hooks/useDeleteProduct\";\nimport ProductForm from \"./ProductForm\";\nimport PromoteProductModal, {\n  usePromoteProductModalContext,\n} from \"./PromoteProductModal\";\nimport SchoolOutlinedIcon from \"@mui/icons-material/SchoolOutlined\";\nimport LearningMaterialsList from \"../LearningMaterialList/LearningMaterialList\";\nimport CreateLearningMaterialModal, {\n  useLearningModalContext,\n} from \"./CreateLearningMaterialModal\";\n\nexport default function ProductDetail() {\n  const { id: productId } = useParams();\n  const [currentPhoto, setCurrentPhoto] = useState(null);\n  const [, openPromoteModal] = usePromoteProductModalContext();\n  const [, openLearningModal] = useLearningModalContext();\n  const [deleteProduct, isDeletingProduct] = useDeleteProduct();\n  const {\n    data: product,\n    error: productFetchError,\n    isFetching: isFetchingProducts,\n  } = useGetProductQuery(productId);\n\n  if (isFetchingProducts) {\n    return <Loading />;\n  }\n  if (!!productFetchError) {\n    return <Error error={productFetchError} />;\n  }\n\n  if (!!product) {\n    return (\n      <Box\n        sx={{\n          padding: 2,\n          marginBottom: 3,\n          maxWidth: 800,\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          position: \"relative\",\n        }}\n      >\n        <Box\n          sx={{\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            maxWidth: 500,\n          }}\n        >\n          <AspectRatio variant=\"plain\">\n            <img\n              src={currentPhoto || resolvePhotoSrc(product.coverPhoto)}\n              alt={product.name}\n            />\n          </AspectRatio>\n\n          <Stack\n            spacing={2}\n            direction=\"row\"\n            sx={{\n              marginTop: 2,\n              justifyContent: \"center\",\n            }}\n          >\n            {[\n              product.coverPhoto,\n              product.photo1,\n              product.photo2,\n              product.photo3,\n              product.photo4,\n            ].map((photo, index) => (\n              <AspectRatio key={index} sx={{ width: 100, cursor: \"pointer\" }}>\n                <img\n                  src={resolvePhotoSrc(photo)}\n                  alt={product.name}\n                  onClick={() => setCurrentPhoto(resolvePhotoSrc(photo))}\n                />\n              </AspectRatio>\n            ))}\n          </Stack>\n\n          <ButtonGroup\n            variant=\"soft\"\n            color=\"warning\"\n            buttonFlex={1}\n            sx={{ marginTop: 3 }}\n          >\n            <Button\n              disabled={isDeletingProduct}\n              loading={isDeletingProduct}\n              loadingPosition=\"start\"\n              startDecorator={<DeleteOutlinedIcon />}\n              onClick={async () => {\n                await deleteProduct(productId);\n              }}\n            >\n              Delete\n            </Button>\n\n            <Button\n              startDecorator={<StarBorderOutlinedIcon />}\n              disabled={product.isFeatured}\n              onClick={() => openPromoteModal()}\n            >\n              Promote\n            </Button>\n            <Button\n              startDecorator={<SchoolOutlinedIcon />}\n              onClick={() => openLearningModal()}\n            >\n              Upload\n            </Button>\n          </ButtonGroup>\n\n          <Typography level=\"h4\" sx={{ marginTop: 3 }}>\n            {toTitleCase(product.name)}\n          </Typography>\n\n          <Typography sx={{ marginTop: 2 }} level=\"body-md\">\n            Sold by\n          </Typography>\n          <Card>\n            <CardContent orientation=\"horizontal\">\n              <Avatar\n                src={resolvePhotoSrc(product.esco.profilePhoto)}\n                alt={product.esco.name}\n              />\n              <Typography level=\"body-sm\">\n                {toTitleCase(product.esco.name)}\n              </Typography>\n              <IconButton\n                sx={{ marginLeft: \"auto\" }}\n                component={RouterLink}\n                to={`/escos/${product.esco.id}`}\n              >\n                <ChevronRightOutlinedIcon />\n              </IconButton>\n            </CardContent>\n          </Card>\n          <Typography level=\"body-md\" sx={{ marginTop: 3, marginBottom: 1 }}>\n            Learning Materials\n          </Typography>\n          <LearningMaterialsList productId={productId} />\n          <ProductForm product={product} />\n        </Box>\n        <PromoteProductModal product={product} />\n        <CreateLearningMaterialModal product={product} />\n      </Box>\n    );\n  }\n}\n","import { toast } from \"react-toastify\";\nimport { useNavigate } from \"react-router\";\nimport { useDeleteProductMutation } from \"../services/product\";\n\nexport default function useDeleteProduct(redirectTo = \"/products\") {\n  const navigate = useNavigate();\n  const [_deleteProduct, { isLoading }] = useDeleteProductMutation();\n  async function deleteProduct(escoId) {\n    const { unwrap } = _deleteProduct(escoId);\n    try {\n      await unwrap();\n      toast.success(\"Product deleted\");\n      navigate(redirectTo);\n    } catch (err) {\n      toast.error(\"Product deletion failed\");\n    } finally {\n    }\n  }\n\n  return [deleteProduct, isLoading];\n}\n","import { Formik, useFormikContext } from \"formik\";\nimport { useEffect } from \"react\";\n\nfunction IsDirtyForm({ onDirty, children }) {\n  const { dirty: isDirty } = useFormikContext();\n  useEffect(() => {\n    onDirty(isDirty);\n  }, [isDirty, onDirty]);\n  return <>{children}</>;\n}\n\nexport default function DirtyFormik({ children, onDirty, ...props }) {\n  return (\n    <Formik {...props}>\n      <IsDirtyForm onDirty={onDirty}>{children}</IsDirtyForm>\n    </Formik>\n  );\n}\n","const transform = require(\"lodash.transform\");\nconst isEqual = require(\"lodash.isequal\");\nconst isObject = require(\"lodash.isobject\");\n\nconst { isArray } = Array;\n/**\n * Find difference between two objects\n * @param  {object} origObj - Source object to compare newObj against\n * @param  {object} newObj  - New object with potential changes\n * @return {object} differences\n */\nexport default function difference(origObj, newObj) {\n  function changes(newObj, origObj) {\n    return transform(newObj, function (result, value, key) {\n      if (!isEqual(value, origObj[key])) {\n        /* For arrays, the whole changed array is taken instead of picking only \n        the differences between the original array and the changed array */\n        result[key] =\n          isObject(value) &&\n          isObject(origObj[key]) &&\n          !isArray(value) &&\n          !isArray(origObj[key])\n            ? changes(value, origObj[key])\n            : value;\n      }\n    });\n  }\n  return changes(newObj, origObj);\n}\n"],"names":["RemoteSelect","_ref","name","label","defaultOptions","getOptions","getOptionLabel","getOptionValue","isMulti","placeholder","sx","props","theme","useTheme","value","selectedOptions","touched","error","setValue","setTouched","useField","required","hasError","_jsxs","FormControl","Array","isArray","children","FormLabel","_jsx","Typography","color","level","Box","display","flexWrap","AsyncSelect","loadOptions","isClearable","onChange","styles","container","baseCss","flexGrow","control","border","palette","danger","outlinedBorder","FormHelperText","fontSize","Yup","max","description","categories","min","ProductForm","product","isDirty","setIsDirty","useState","updateProduct","isUpdatingProduct","_updateProduct","isLoading","useUpdateProductMutation","async","productId","body","bodyCopy","structuredClone","length","map","category","id","unwrap","data","toast","success","err","parseError","useUpdateProduct","fetchProductCategories","useLazyGetProductsCategoriesQuery","DirtyFormik","initialValues","validationSchema","ProductSchema","onSubmit","updatedValues","difference","values","isEmpty","onDirty","Form","TextInput","marginTop","option","inputValue","callback","then","_ref2","productCategories","filter","_ref3","toLowerCase","includes","catch","message","Textarea","Stack","direction","width","Button","type","size","variant","disabled","startDecorator","SaveOutlinedIcon","marginLeft","loading","loadingPosition","LearningMaterial","item","_deleteLearningMaterial","useDeleteLearningMaterialMutation","videoUrl","title","Card","minWidth","maxWidth","borderRadius","CardContent","orientation","alignItems","overflow","textOverflow","whiteSpace","onClick","deleteLearningMaterial","YouTubePlayer","url","height","EmptyLearningMaterials","openLearningModal","useLearningModalContext","Sheet","justifyContent","SchoolOutlinedIcon","LearningMaterialsList","learningMaterials","isFetching","fetchError","useGetProductLearningMaterialQuery","Loading","Error","spacing","overflowX","overflowY","scrollbarWidth","msOverflowStyle","learningMaterial","index","flex","ProductDetail","useParams","currentPhoto","setCurrentPhoto","openPromoteModal","usePromoteProductModalContext","deleteProduct","isDeletingProduct","redirectTo","arguments","undefined","navigate","useNavigate","_deleteProduct","useDeleteProductMutation","escoId","useDeleteProduct","productFetchError","isFetchingProducts","useGetProductQuery","padding","marginBottom","marginRight","position","AspectRatio","src","resolvePhotoSrc","coverPhoto","alt","photo1","photo2","photo3","photo4","photo","cursor","ButtonGroup","buttonFlex","DeleteOutlinedIcon","StarBorderOutlinedIcon","isFeatured","toTitleCase","Avatar","esco","profilePhoto","IconButton","component","RouterLink","to","ChevronRightOutlinedIcon","PromoteProductModal","CreateLearningMaterialModal","IsDirtyForm","dirty","useFormikContext","useEffect","_Fragment","Formik","transform","require","isEqual","isObject","origObj","newObj","changes","result","key"],"sourceRoot":""}